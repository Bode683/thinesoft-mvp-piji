{
  "info": {
    "name": "06 - Realm Management",
    "description": "Realm configuration and management operations",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{access_token}}",
        "type": "string"
      }
    ]
  },
  "item": [
    {
      "name": "Get Realm Details",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "if (pm.response.code === 200) {",
              "    var jsonData = pm.response.json();",
              "    pm.test('Status code is 200', function () {",
              "        pm.response.to.have.status(200);",
              "    });",
              "    pm.test('Realm name exists', function () {",
              "        pm.expect(jsonData.realm).to.exist;",
              "    });",
              "}"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{base_url}}/admin/realms/{{realm}}",
          "host": ["{{base_url}}"],
          "path": ["admin", "realms", "{{realm}}"]
        },
        "description": "Get complete realm configuration and settings."
      },
      "response": []
    },
    {
      "name": "Update Realm",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('Status code is 204', function () {",
              "    pm.response.to.have.status(204);",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "request": {
        "method": "PUT",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"displayName\": \"The DDT Realm - Updated\",\n  \"enabled\": true,\n  \"loginWithEmailAllowed\": true,\n  \"duplicateEmailsAllowed\": false,\n  \"resetPasswordAllowed\": true,\n  \"rememberMe\": true,\n  \"bruteForceProtected\": true,\n  \"accessTokenLifespan\": 300,\n  \"ssoSessionIdleTimeout\": 1800,\n  \"ssoSessionMaxLifespan\": 36000\n}"
        },
        "url": {
          "raw": "{{base_url}}/admin/realms/{{realm}}",
          "host": ["{{base_url}}"],
          "path": ["admin", "realms", "{{realm}}"]
        },
        "description": "Update realm configuration settings."
      },
      "response": []
    },
    {
      "name": "Get Realm Events Config",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "if (pm.response.code === 200) {",
              "    var jsonData = pm.response.json();",
              "    pm.test('Status code is 200', function () {",
              "        pm.response.to.have.status(200);",
              "    });",
              "}"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{base_url}}/admin/realms/{{realm}}/events/config",
          "host": ["{{base_url}}"],
          "path": ["admin", "realms", "{{realm}}", "events", "config"]
        },
        "description": "Get realm events configuration."
      },
      "response": []
    },
    {
      "name": "Update Realm Events Config",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('Status code is 204', function () {",
              "    pm.response.to.have.status(204);",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "request": {
        "method": "PUT",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"eventsEnabled\": true,\n  \"eventsListeners\": [\"jboss-logging\"],\n  \"enabledEventTypes\": [\n    \"LOGIN\",\n    \"LOGIN_ERROR\",\n    \"LOGOUT\",\n    \"LOGOUT_ERROR\",\n    \"REGISTER\",\n    \"REGISTER_ERROR\",\n    \"UPDATE_PASSWORD\",\n    \"UPDATE_PASSWORD_ERROR\"\n  ],\n  \"adminEventsEnabled\": true,\n  \"adminEventsDetailsEnabled\": true\n}"
        },
        "url": {
          "raw": "{{base_url}}/admin/realms/{{realm}}/events/config",
          "host": ["{{base_url}}"],
          "path": ["admin", "realms", "{{realm}}", "events", "config"]
        },
        "description": "Update realm events configuration."
      },
      "response": []
    },
    {
      "name": "Get Realm Events",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "if (pm.response.code === 200) {",
              "    var jsonData = pm.response.json();",
              "    pm.test('Status code is 200', function () {",
              "        pm.response.to.have.status(200);",
              "    });",
              "    pm.test('Events array exists', function () {",
              "        pm.expect(jsonData).to.be.an('array');",
              "    });",
              "}"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{base_url}}/admin/realms/{{realm}}/events?max=100",
          "host": ["{{base_url}}"],
          "path": ["admin", "realms", "{{realm}}", "events"],
          "query": [
            {
              "key": "max",
              "value": "100"
            },
            {
              "key": "type",
              "value": "LOGIN",
              "disabled": true
            },
            {
              "key": "client",
              "value": "",
              "disabled": true
            },
            {
              "key": "user",
              "value": "",
              "disabled": true
            },
            {
              "key": "dateFrom",
              "value": "",
              "disabled": true
            },
            {
              "key": "dateTo",
              "value": "",
              "disabled": true
            }
          ]
        },
        "description": "Get realm events with optional filters."
      },
      "response": []
    },
    {
      "name": "Clear Realm Events",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('Status code is 204', function () {",
              "    pm.response.to.have.status(204);",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "request": {
        "method": "DELETE",
        "header": [],
        "url": {
          "raw": "{{base_url}}/admin/realms/{{realm}}/events",
          "host": ["{{base_url}}"],
          "path": ["admin", "realms", "{{realm}}", "events"]
        },
        "description": "Clear all realm events."
      },
      "response": []
    },
    {
      "name": "Get Admin Events",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "if (pm.response.code === 200) {",
              "    var jsonData = pm.response.json();",
              "    pm.test('Status code is 200', function () {",
              "        pm.response.to.have.status(200);",
              "    });",
              "    pm.test('Admin events array exists', function () {",
              "        pm.expect(jsonData).to.be.an('array');",
              "    });",
              "}"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{base_url}}/admin/realms/{{realm}}/admin-events?max=100",
          "host": ["{{base_url}}"],
          "path": ["admin", "realms", "{{realm}}", "admin-events"],
          "query": [
            {
              "key": "max",
              "value": "100"
            },
            {
              "key": "operationTypes",
              "value": "",
              "disabled": true
            },
            {
              "key": "authRealm",
              "value": "",
              "disabled": true
            },
            {
              "key": "authClient",
              "value": "",
              "disabled": true
            },
            {
              "key": "authUser",
              "value": "",
              "disabled": true
            }
          ]
        },
        "description": "Get admin events (administrative operations audit log)."
      },
      "response": []
    },
    {
      "name": "Clear Admin Events",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('Status code is 204', function () {",
              "    pm.response.to.have.status(204);",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "request": {
        "method": "DELETE",
        "header": [],
        "url": {
          "raw": "{{base_url}}/admin/realms/{{realm}}/admin-events",
          "host": ["{{base_url}}"],
          "path": ["admin", "realms", "{{realm}}", "admin-events"]
        },
        "description": "Clear all admin events."
      },
      "response": []
    },
    {
      "name": "Get Client Sessions Stats",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "if (pm.response.code === 200) {",
              "    var jsonData = pm.response.json();",
              "    pm.test('Status code is 200', function () {",
              "        pm.response.to.have.status(200);",
              "    });",
              "}"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{base_url}}/admin/realms/{{realm}}/client-session-stats",
          "host": ["{{base_url}}"],
          "path": ["admin", "realms", "{{realm}}", "client-session-stats"]
        },
        "description": "Get client session statistics for the realm."
      },
      "response": []
    },
    {
      "name": "Clear Realm Cache",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('Status code is 204', function () {",
              "    pm.response.to.have.status(204);",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "request": {
        "method": "POST",
        "header": [],
        "url": {
          "raw": "{{base_url}}/admin/realms/{{realm}}/clear-realm-cache",
          "host": ["{{base_url}}"],
          "path": ["admin", "realms", "{{realm}}", "clear-realm-cache"]
        },
        "description": "Clear the realm cache."
      },
      "response": []
    },
    {
      "name": "Clear User Cache",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('Status code is 204', function () {",
              "    pm.response.to.have.status(204);",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "request": {
        "method": "POST",
        "header": [],
        "url": {
          "raw": "{{base_url}}/admin/realms/{{realm}}/clear-user-cache",
          "host": ["{{base_url}}"],
          "path": ["admin", "realms", "{{realm}}", "clear-user-cache"]
        },
        "description": "Clear the user cache."
      },
      "response": []
    },
    {
      "name": "Clear Keys Cache",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('Status code is 204', function () {",
              "    pm.response.to.have.status(204);",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "request": {
        "method": "POST",
        "header": [],
        "url": {
          "raw": "{{base_url}}/admin/realms/{{realm}}/clear-keys-cache",
          "host": ["{{base_url}}"],
          "path": ["admin", "realms", "{{realm}}", "clear-keys-cache"]
        },
        "description": "Clear the keys cache."
      },
      "response": []
    },
    {
      "name": "Get Realm Keys",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "if (pm.response.code === 200) {",
              "    var jsonData = pm.response.json();",
              "    pm.test('Status code is 200', function () {",
              "        pm.response.to.have.status(200);",
              "    });",
              "    pm.test('Keys exist', function () {",
              "        pm.expect(jsonData.keys).to.be.an('array');",
              "    });",
              "}"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{base_url}}/admin/realms/{{realm}}/keys",
          "host": ["{{base_url}}"],
          "path": ["admin", "realms", "{{realm}}", "keys"]
        },
        "description": "Get realm cryptographic keys."
      },
      "response": []
    },
    {
      "name": "Get Default Groups",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "if (pm.response.code === 200) {",
              "    var jsonData = pm.response.json();",
              "    pm.test('Status code is 200', function () {",
              "        pm.response.to.have.status(200);",
              "    });",
              "}"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{base_url}}/admin/realms/{{realm}}/default-groups",
          "host": ["{{base_url}}"],
          "path": ["admin", "realms", "{{realm}}", "default-groups"]
        },
        "description": "Get default groups that are automatically assigned to new users."
      },
      "response": []
    },
    {
      "name": "Add Default Group",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('Status code is 204', function () {",
              "    pm.response.to.have.status(204);",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "request": {
        "method": "PUT",
        "header": [],
        "url": {
          "raw": "{{base_url}}/admin/realms/{{realm}}/default-groups/{{test_group_id}}",
          "host": ["{{base_url}}"],
          "path": ["admin", "realms", "{{realm}}", "default-groups", "{{test_group_id}}"]
        },
        "description": "Add a group to default groups."
      },
      "response": []
    },
    {
      "name": "Remove Default Group",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('Status code is 204', function () {",
              "    pm.response.to.have.status(204);",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "request": {
        "method": "DELETE",
        "header": [],
        "url": {
          "raw": "{{base_url}}/admin/realms/{{realm}}/default-groups/{{test_group_id}}",
          "host": ["{{base_url}}"],
          "path": ["admin", "realms", "{{realm}}", "default-groups", "{{test_group_id}}"]
        },
        "description": "Remove a group from default groups."
      },
      "response": []
    },
    {
      "name": "Get Realm Localization",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "if (pm.response.code === 200) {",
              "    pm.test('Status code is 200', function () {",
              "        pm.response.to.have.status(200);",
              "    });",
              "}"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{base_url}}/admin/realms/{{realm}}/localization",
          "host": ["{{base_url}}"],
          "path": ["admin", "realms", "{{realm}}", "localization"]
        },
        "description": "Get available localization languages."
      },
      "response": []
    }
  ]
}
